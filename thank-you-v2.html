<!DOCTYPE html> <html lang="en"> 
<head> <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1" /> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Thank you</title> 
  <style>*{margin:0;padding:0;} html,body,#wrapper{width:100%;height:100%;} iframe{border-radius:0 !important;}</style> 

  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" rel="stylesheet">

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>

  <link href="assets/css/theme.css" rel="stylesheet" />
  <link href="assets/css/custom.css" rel="stylesheet" />
  <link href="assets/css/fixed.css" rel="stylesheet" />

  <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/favicon-16x16.png">
  <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicons/favicon.ico">
  <link rel="manifest" href="assets/img/favicons/manifest.json">
  <meta name="msapplication-TileImage" content="assets/img/favicons/mstile-150x150.png">
  <meta name="theme-color" content="#ffffff">


</head>

<body>
<!-- ========================================= -->
<!-- cut here to embed in the squareSpace site -->



<script>

let testObject = [{}];
let date = new Date();

function getUrlVars()
{
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
                hash = hashes[i].split('=');                        
                vars[hash[0]] = hash[1];
        }
        return vars;

}


var url_vars = getUrlVars();
for(var i in url_vars)
{
  let q = i.replace(/!/g,'=');    
  let question = q.replace(/#/g,' ');
  let space = url_vars[i].replace(/%20/g, ' ');
      let answer = space.replace(/%40/g, '@');
      testObject.push({"name":question, "value":answer});
} 

//testObject.push({"name": "QR Scanned", "value": "TRUE"}, {"name":"Scan Date", "value": date});

console.log(testObject);

let postUrl = 'https://script.google.com/macros/s/AKfycbwcCzX-c6rrV0Rb_hwIOuZ3F2BYDoerbZS-gB5XgSkuMvYQ9rIACegEN6CtkRPC7KIM/exec';

// output the content of the JS Array that has been stringified (so we can see it in the console) 
console.log(testObject);
  $.ajax({
    url: postUrl, // google sheet url
    method: "GET",
    dataType: "json",
    data: testObject, // JS array
    success: function(data){
      console.log(data.result);
      if (data.result = "success") {
        // show custom msg or do other stuff for the user to see, eg show message on web page
        console.log("successfully posted to google sheet");
      };
    },
    error: function(data){
      console.log("fail");
    }
});


//urlParams.append('status', 'true')) //returns ?q=losAngeles&country=US&status=true

</script>

<!-- embed typeform --> 

<div id="wrapper" data-tf-widget="BlgdLW3t" data-tf-inline-on-mobile data-tf-hidden="key=xxxxx"></div> <script src="//embed.typeform.com/next/embed.js"></script> 



</body>


</html>